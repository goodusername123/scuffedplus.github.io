<!DOCTYPE html>
<html>
<head>
  <title>Inline HSV Color Wheel (No Libraries)</title>
  <meta name="viewport" content="width=device-width, initial-scale=0.8">
  <style>
    body {
      margin: 20px;
      font-family: sans-serif;
    }
    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    canvas {
      border: 1px solid #ccc;
      cursor: pointer;
    }
    h3 {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h3>Click anywhere on the color wheel to change the background!</h3>
    <canvas id="colorWheel" width="300" height="300"></canvas>
  </div>

  <script>
    function hsvToRgb(h, s, v) {
      const c = v * s;
      const x = c * (1 - Math.abs((h / 60) % 2 - 1));
      const m = v - c;
      let r, g, b;

      if (0 <= h && h < 60) {
        r = c; g = x; b = 0;
      } else if (h < 120) {
        r = x; g = c; b = 0;
      } else if (h < 180) {
        r = 0; g = c; b = x;
      } else if (h < 240) {
        r = 0; g = x; b = c;
      } else if (h < 300) {
        r = x; g = 0; b = c;
      } else {
        r = c; g = 0; b = x;
      }

      return {
        r: Math.round((r + m) * 255),
        g: Math.round((g + m) * 255),
        b: Math.round((b + m) * 255)
      };
    }

    function drawColorWheel() {
      const canvas = document.getElementById("colorWheel");
      const ctx = canvas.getContext("2d");
      const { width, height } = canvas;
      const imageData = ctx.createImageData(width, height);
      const data = imageData.data;

      const cx = width / 2;
      const cy = height / 2;
      const radius = Math.min(cx, cy);

      for (let y = 0; y < height; y++) {
        for (let x = 0; x < width; x++) {
          const dx = x - cx;
          const dy = y - cy;
          const dist = Math.sqrt(dx * dx + dy * dy);
          
          if (dist <= radius) {
            let angle = Math.atan2(dy, dx) * (180 / Math.PI);
            if (angle < 0) angle += 360;

            const sat = dist / radius;
            
            // Fix value at 1 for brightness
            const { r, g, b } = hsvToRgb(angle, sat, 1);
            
            const index = (y * width + x) * 4;
            data[index]     = r;   // Red
            data[index + 1] = g;   // Green
            data[index + 2] = b;   // Blue
            data[index + 3] = 255; // Alpha
          }
        }
      }
      
      // Update the canvas pixels
      ctx.putImageData(imageData, 0, 0);
    }

    window.onload = () => {
      drawColorWheel();

      const canvas = document.getElementById("colorWheel");
      const ctx = canvas.getContext("2d");

      canvas.addEventListener("click", (e) => {
        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        const pixel = ctx.getImageData(x, y, 1, 1).data;

        const [r, g, b, a] = pixel;
        if (a > 0) { // If alpha > 0, it's inside the color wheel
          document.body.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
        }
      });
    };
  </script>
</body>
</html>
